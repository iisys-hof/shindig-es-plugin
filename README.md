# shindig-es-plugin

Elasticsearch Indexing Plugin for Apache Shindig (Activities, Profiles, Messages). Contains an Event Bus over which events can be fired and where listeners can be registered for individual types. Currently, Events are generated by wrappers around Shindig's SPI implementations, intercepting calls and retrieving additional Data.
Requires the Neo4j Native Websocket Backend to be installed.

Currently uses Elasticsearch 1.5.2

Installation:

1. (optional) Import into Eclipse with Maven support
2. Run maven build with package goal
3. Copy generated jar-file to Shindig's 'WEB-INF/lib/' folder
4. Copy Lucene Core and Elasticsearch jar-files from 'target/dependency-jars/' to Shindig's 'WEB-INF/lib/' folder
5. Modify Shindig's web.xml, adding the following Guice module after the module of the backend implementation "org.apache.shindig.elasticsearch.ESPluginGuiceModule".
6. Optional: Shindig's web.xml can be extended to initiate a safe shutdown of the ES-Connection by adding the following Servlet Context Listener after Shindig's Cleanup listener. However, the XML file's header must also be updated to servlet spec 3.0, since listener order is not honored in 2.5.
```
    <listener>
      <listener-class>org.apache.shindig.elasticsearch.util.ConnectorCleanupListener</listener-class>
    </listener>
```

Configuration File: /src/main/resources/shindig-es-plugin.properties

File with mappings: /src/main/resources/mapping.json

The mapping can also be placed in the classpath like a properties file.